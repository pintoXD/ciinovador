#!/bin/sh

cd "/home/cinovador/Documents/course_files/practice_0"

JOB_ID=15
if [ "$1" ]; then
    JOB_ID=${1}
fi
source /home/tools/cadence/installs/IC231/share/cdssetup/adexl/job_collection_setup.sh ${JOB_ID}

export CDS_USE_XVFB=1
export CDS_XVFB_MONITOR=0
export CDS_PROMPT_CKOUT=none
export CDS_PROMPT_CKIN=none
export CDS_SIM_MONITOR_LOG_FILE="/home/cinovador/Documents/course_files/practice_0/logs_cinovador/logs0/Job${COLLECTION_JOB_ID}.log"

export AXL_JOB_DETAIL_COLS=""

export AXL_JOB_DETAIL_COLS=""

/home/tools/cadence/installs/IC231/tools.lnx86/dfII/bin/spectreMonitor  --davinciService DaVinciService_31080_1729786834 --axlsession fnxSession4 -lscs 000175E1894CBE06FF0966E38F1FFC06BC4D7EED88199869CA2C7EEDDC43CC33CA2C39A0A173FC06867D66E38F1FFC06BC4D66E38F1FFC06BC4D01F9190B6A12DB5700001E65 -beanhost "cinova05.lesc.ufc.br" -beanport 11407 -beanLogFile "/home/cinovador/Documents/course_files/practice_0/logs_cinovador/logs0/amps_Job${COLLECTION_JOB_ID}.log"  -beanbinlog "" --domain 0 --interactive yes --netlistOpt no --useMultiPointEvaluation yes --exprEvalShowJobStderr yes --evalSimParallel no --maxSims 0 --historyName "ExplorerRun.0" --historyUUID ""  --exprEvaluator "vds" --mcMapping mc1.mapping --checkLogStatusInterval 0  --checkSimulatorLogTimeout 1200  --exprEvalMaxTries 3  --maxNFSSyncWait 60  -adeBrokerAddress "cinova05.lesc.ufc.br:45421"  --fromADE true --virtuosoBinary "virtuoso" --guiDisplay cinova05.lesc.ufc.br:0 --globalStatus 60  --evaluateMultiMC yes --evalOnSimFail SkipFailedAnalyses --numRetriesOnError 1 --fenixMode explorer --lingertimeout 300 -ahdlLockTimeout 60 --sdbLib fanout-tests --sdbCell fanout-question-4 --sdbView maestro --heartBeatFileDir /dev/shm --id ${COLLECTION_JOB_ID} --uuid "${COLLECTION_JOB_UUID}" --log "/home/cinovador/Documents/course_files/practice_0/logs_cinovador/logs0/Job${COLLECTION_JOB_ID}.log" &

JOB_PID=$!
HOST_NAME=$(hostname)
printf "Simulation Monitor process '$JOB_PID' is starting up on host '$HOST_NAME'"
wait $JOB_PID
status=$?
if [ $status != 0 ]; then
  /home/tools/cadence/installs/IC231/tools.lnx86/bin/checkSysConf IC23.1 > /home/cinovador/Documents/course_files/practice_0/logs_cinovador/logs0/Job${COLLECTION_JOB_ID}.log.checkSysConf
fi
exit $status

